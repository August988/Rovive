/* dist/js/thumbnails.bundle.min.js */
!function(n){var r={};function a(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(1);var u=((r=a)&&r.__esModule?r:{default:r}).default.module("thumbnails",["robloxApp","thumbnailsTemplates"]);t.default=u},function(e,t){e.exports=angular},function(e,t){e.exports=Roblox},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(1)),a=n(4);n(5);var u=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}(0,a.importFilesUnderPath)(n(6)),(0,a.importFilesUnderPath)(n(8)),(0,a.importFilesUnderPath)(n(10)),(0,a.importFilesUnderPath)(n(12));var o=n(14);(0,a.templateCacheGenerator)(r.default,"thumbnailsTemplates",o,null),t.default=u.default},function(e,t,n){"use strict";function u(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function i(e){return e.split("/").pop().replace(".html","")}var r={importFilesUnderPath:function(e){e.keys().forEach(e)},templateCacheGenerator:function(e,t,r,a){return e.module(t,[]).run(["$templateCache",function(n){r&&r.keys().forEach(function(e){var t=u(i(e));n.put(t,r(e))}),a&&a.keys().forEach(function(e){var t=u(i(e));n.put(t,function(e){return e.replace(/<\/?script[^>]*>/gi,"")}(a(e)))})}])}};e.exports=r},function(e,t,n){},function(e,t,n){var r={"./2dThumbnailComponent.js":7};function a(e){var t=u(e);return n(t)}function u(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=u,(e.exports=a).id=6},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0);var u={templateUrl:"2d-thumbnail",bindings:{thumbnailType:"<",thumbnailTargetId:"<",size:"<"},controller:"2dThumbnailController"};((r=a)&&r.__esModule?r:{default:r}).default.component("thumbnail2d",u),t.default=u},function(e,t,n){var r={"./thumbnailConstants.js":9};function a(e){var t=u(e);return n(t)}function u(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=u,(e.exports=a).id=8},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),u=(r=a)&&r.__esModule?r:{default:r};var i=n(2).EnvironmentUrls.thumbnailsApi,o={urls:{getAssetThumbnails:i+"/v1/assets",getAvatarHeadshots:i+"/v1/users/avatar-headshot",getBundleThumbnails:i+"/v1/bundles/thumbnails",getGameIcons:i+"/v1/games/icons",getGroupIcons:i+"/v1/groups/icons"},requestProperties:{batchSize:100},cooldown:{maxRetryAttempts:10,minCooldown:1e3,maxCooldown:3e4},sizes:{small:"small",medium:"medium",large:"large"},sizeMap:{small:"150x150",medium:"150x150",large:"150x150"},thumbnailTypes:{assetThumbnail:"assetThumbnail",avatarHeadshot:"avatarHeadshot",bundleThumbnail:"bundleThumbnail",gameIcon:"gameIcon",groupIcon:"groupIcon"},thumbnailStates:{error:"Error",complete:"Completed",inReview:"InReview",pending:"Pending",blocked:"Blocked"},formats:{png:"png"}};u.default.constant("thumbnailConstants",o),t.default=o},function(e,t,n){var r={"./2dThumbnailController.js":11};function a(e){var t=u(e);return n(t)}function u(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=u,(e.exports=a).id=10},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),u=(r=a)&&r.__esModule?r:{default:r};function i(n,r){var a=this,u="";a.getCssClasses=function(){return{"icon-error":a.thumbnailState===n.thumbnailStates.error,"icon-in-review":a.thumbnailState===n.thumbnailStates.inReview,"icon-blocked":a.thumbnailState===n.thumbnailStates.blocked,"icon-pending":a.thumbnailState===n.thumbnailStates.pending}};function e(){var e=r.getRequestSize(a.size),t=a.thumbnailType+":"+a.thumbnailTargetId+":"+e;u!==t&&(u=t,a.thumbnailState=n.thumbnailStates.pending,r.getThumbnailImage(a.thumbnailType,a.thumbnailTargetId,e).then(function(e){a.thumbnailState=e.state,a.thumbnailUrl=e.imageUrl},function(){a.thumbnailState=n.thumbnailStates.error}))}a.$onInit=e,a.$onChanges=e}i.$inject=["thumbnailConstants","thumbnailService"],u.default.controller("2dThumbnailController",i),t.default=i},function(e,t,n){var r={"./thumbnailService.js":13};function a(e){var t=u(e);return n(t)}function u(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=u,(e.exports=a).id=12},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),u=(r=a)&&r.__esModule?r:{default:r},p=n(2);function i(i,a,o,l,u,s){function c(e){return e.toString()}function m(e,t){var n=e+":"+t;if(d.hasOwnProperty(n))return d[n];var r=u.createRequestProcessor(function(n){var r=function(e){var t={};switch(e){case l.thumbnailTypes.assetThumbnail:t.url=l.urls.getAssetThumbnails;break;case l.thumbnailTypes.avatarHeadshot:t.url=l.urls.getAvatarHeadshots;break;case l.thumbnailTypes.bundleThumbnail:t.url=l.urls.getBundleThumbnails;break;case l.thumbnailTypes.gameIcon:t.url=l.urls.getGameIcons;break;case l.thumbnailTypes.groupIcon:t.url=l.urls.getGroupIcons;break;default:return a.debug("Missing urlConfig implementation for thumbnail type: "+e),null}return t}(e),u=function(e,t,n){var r={size:n,format:l.formats.png};switch(e){case l.thumbnailTypes.assetThumbnail:r.assetIds=t.join(",");break;case l.thumbnailTypes.avatarHeadshot:r.userIds=t.join(",");break;case l.thumbnailTypes.bundleThumbnail:r.bundleIds=t.join(",");break;case l.thumbnailTypes.gameIcon:r.universeIds=t.join(",");break;case l.thumbnailTypes.groupIcon:r.groupIds=t.join(",");break;default:return a.debug("Missing request parameters implementation for thumbnail type: "+e),null}return r}(e,n,t);return i(function(t,e){if(r&&u){var a=(new Date).getTime();o.httpGet(r,u).then(function(e){var r={};e.data.forEach(function(e){var t=c(e.targetId);r[t]=e}),n.forEach(function(e){var t=c(e);if(r.hasOwnProperty(t)&&r[t]){if(r[t].state===l.thumbnailStates.pending)delete r[t],b[t]||(b[t]={startTime:a});else if(r[t].state===l.thumbnailStates.complete&&b[t]){var n=(new Date).getTime();p.ThumbnailMetrics&&p.ThumbnailMetrics.logFinalThumbnailTime(n-b[t].startTime)}}else r[t]={targetId:e,state:l.thumbnailStates.error}}),t(r)},function(){t({})})}else e(s.errors.unretriableFailure)})},c,f);return d[n]=r}var d={},f={getFailureCooldown:u.cooldowns.createExponentialBackoffCooldown(l.cooldown.minCooldown,l.cooldown.maxCooldown),maxRetryAttempts:l.cooldown.maxRetryAttempts,batchSize:l.requestProperties.batchSize},b={},h={};return{getRequestSize:function(e){if(e){if(l.sizeMap.hasOwnProperty(e))return l.sizeMap[e];a.debug("Invalid size for thumbnail: "+e+" (medium will be used.)")}return l.sizeMap.medium},getThumbnailImage:function(e,t,n){var r=function(e,t,n){return"thumbnail_type:"+e+"_targetId:"+t+"_requestedSize:"+n}(e,t,n);if(!(r in h)){var a=m(e,n).queueItem(t).catch(function(e){return p.ThumbnailMetrics&&p.ThumbnailMetrics.logThumbnailTimeout(),i.reject(e)});h[r]=a}return h[r]}}}i.$inject=["$q","$log","httpService","thumbnailConstants","batchRequestService","batchRequestConstants"],u.default.factory("thumbnailService",i),t.default=i},function(e,t,n){var r={"./components/templates/2dThumbnail.html":15};function a(e){var t=u(e);return n(t)}function u(e){if(n.o(r,e))return r[e];var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return Object.keys(r)},a.resolve=u,(e.exports=a).id=14},function(e,t){e.exports='<span ng-class="$ctrl.getCssClasses()" thumbnail-type="{{ $ctrl.thumbnailType }}" thumbnail-target-id="{{ $ctrl.thumbnailTargetId }}" size="{{ $ctrl.size }}"> <img ng-if="$ctrl.thumbnailUrl" ng-src="{{ $ctrl.thumbnailUrl }}"/> </span>'}]);

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("Thumbnails");