/* dist/js/crossTabCommunication.bundle.min.js */
!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1),a=(r=o)&&r.__esModule?r:{default:r};function i(e,t){return"storage."+e+"_"+t}var u={IsAvailable:function(){return function(){var e="roblox";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}()},Subscribe:function(t,e,n){var r=i(t,e);(0,a.default)(window).unbind(r).bind(r,function(e){e.originalEvent.key===t&&n(e.originalEvent.newValue)})},Unsubscribe:function(e,t){var n=i(e,t);(0,a.default)(window).unbind(n)},Publish:function(e,t){localStorage.removeItem(e),localStorage.setItem(e,t)}};t.default=u},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";n(3);var r=a(n(0)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}window.Roblox.CrossTabCommunication={PubSub:r.default.default,Kingmaker:o.default.default}},function(e,t,n){"use strict";function a(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function i(e){return e.split("/").pop().replace(".html","")}var r={importFilesUnderPath:function(e){e.keys().forEach(e)},templateCacheGenerator:function(e,t,r,o){return e.module(t,[]).run(["$templateCache",function(n){r&&r.keys().forEach(function(e){var t=a(i(e));n.put(t,r(e))}),o&&o.keys().forEach(function(e){var t=a(i(e));n.put(t,function(e){return e.replace(/<\/?script[^>]*>/gi,"")}(o(e)))})}])}};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var i,u,s,l,c,f,d,m,g,p,b,v,I,x,h="Roblox.CrossTabCommunication.Kingmaker",w={masterId:h+".masterId",electionInProgress:h+".electionInProgress",masterIdRequest:h+".masterIdRequest",masterIdResponse:h+".masterIdResponse",masterLastResponseTime:h+".masterLastResponseTime"},y="q",S=[],M=[],P=function(){return o.default.IsAvailable()};function R(e){for(var t=M.slice(0),n=0;n<t.length;n++)try{t[n](e)}catch(e){}}function T(){return Date.now().toString()}function _(){R("Master is:"+u)}function O(e){R("Announcing: Is this tab the master? "+e);for(var t=S.slice(0),n=0;n<t.length;n++)try{t[n](e)}catch(e){R("Error running subscribed election result handler: "+JSON.stringify(e))}}function j(){R("Declaring myself as the master"+u),u=I,s=!0,o.default.Publish(w.masterId,u),localStorage.removeItem(w.electionInProgress),O(!0),(0,r.default)(window).unbind("unload."+h).bind("unload."+h,function(){localStorage.getItem(w.masterId)})}function C(){var e=localStorage.getItem(w.electionInProgress),t=parseInt(e);e&&Date.now()-t>g&&localStorage.removeItem(w.electionInProgress),window.setTimeout(C,g)}function D(){var e=localStorage.getItem(w.electionInProgress);u="",e?(R("Election already in progress"),window.setTimeout(function(){0===u.length?j():u!==I&&O(!1),_()},v)):(R("Election not in progress"),localStorage.setItem(w.electionInProgress,T()),0===u.length?j():u!==I&&O(!1),_())}function E(){R("Checking if Master still active"),!0===s||Date.now()-c<=f||(i="",o.default.Publish(w.masterIdRequest,y),window.setTimeout(function(){if(0===i.length){if(!0===s||Date.now()-c<=f)return void j();R("Master did not respond. Initiating election"),D()}else u!==i&&(O(!1),u=i,_())},b))}function k(){l&&clearTimeout(l),l=window.setTimeout(function(){!1===s?E():localStorage.setItem(w.masterLastResponseTime,T()),k()},p)}x=(new Date).getTime(),I="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(x+16*Math.random())%16|0;return x=Math.floor(x/16),("x"===e?t:3&t|8).toString(16)}),i="",s=!1,l=u=null,c=Date.now()-1e4,f=2500,d=2e4,m=Math.floor(100*Math.random()+1),g=500,p=2e3+m,b=1500+m,v=400+m,(0,r.default)(function(){P()&&function(){var e=localStorage.getItem(w.masterId);R("Binding to events"),o.default.Subscribe(w.masterIdRequest,h,function(e){!0===s&&e===y&&(R("Query Received - Confirming Still Master"),o.default.Publish(w.masterIdResponse,I),localStorage.setItem(w.masterLastResponseTime,T()))}),o.default.Subscribe(w.masterId,h,function(e){if(e){R("Received Notice Of Master"),c=Date.now();var t=s;0==(s=(u=e)===I)&&t&&(O(!1),k()),!0!==s||t||j(),localStorage.removeItem(w.electionInProgress),_()}}),o.default.Subscribe(w.masterIdResponse,h,function(e){e?(R("Master Responded to Query"),c=Date.now(),i=e,k()):R("Master Responded to Query - no message")});var t=localStorage.getItem(w.masterLastResponseTime);c=t&&0!==t.length?parseInt(t):0,e?e===I?s=!0:0<c&&Date.now()-c>d?D():E():D(),window.setTimeout(function(){C()},g),k()}()});var L={IsAvailable:P,IsMasterTab:function(){return s},SubscribeToMasterChange:function(e){S.push(e)},AttachLogger:function(e){M.push(e)}};t.default=L}]);

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("CrossTabCommunication");