"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{2565:function(e,t,n){var r=n(5893),a=(n(7294),n(1693)),o=n(7989),i=(0,a.QM)({image:{display:"block",margin:"0 auto",width:"100%",maxWidth:"728px",height:"auto"}});t.Z=function(e){i();return(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)(o.Z,{type:1})})})}},2316:function(e,t,n){var r=n(5893),a=(n(5304),n(8452));t.Z=function(e){var t="User"===e.type||1===e.type?"/User.aspx?ID="+e.id:"/My/Groups.aspx?gid="+e.id;return(0,r.jsx)(a.Z,{href:t,children:(0,r.jsx)("a",{children:e.name})})}},3095:function(e,t,n){var r=n(5893),a=n(7294),o=n(1693),i=n(9013),c=n(7989),s=(n(7858),(0,o.QM)({title:{fontWeight:300,marginBottom:"10px",marginTop:"10px",color:"rgb(33, 37, 41)",marginLeft:"10px"},gameRow:{display:"flex",flexWrap:"nowrap",overflowX:"hidden",marginLeft:"-4px","&>div":{flex:"0 0 auto"}},gameCard:{width:"170px",paddingLeft:"5px",paddingRight:"5px"},pagerButton:{cursor:"pointer",color:"#666",boxShadow:"0 0 3px 0 #ccc","&:hover":{color:"black"}},goBack:{width:"40px",height:"100%",background:"rgba(255,255,255,0.5)",position:"relative",float:"left",marginRight:"-35px"},goForward:{width:"40px",height:"100%",background:"rgba(255,255,255,0.8)",position:"relative",float:"right",marginLeft:"-35px"},pagerCaret:{textAlign:"center",marginTop:"240%",userSelect:"none",fontSize:"40px"},caretLeft:{display:"block",transform:"rotate(90deg)",marginRight:"10px"},caretRight:{display:"block",transform:"rotate(-90deg)",marginLeft:"10px"}}));t.Z=function(e){var t=s(),n=(0,a.useState)(0),o=n[0],u=n[1],d=(0,a.useState)(0),l=d[0],p=d[1],m=(0,a.useState)(0),f=m[0],h=m[1],g=(0,a.useRef)(null),v=(0,a.useState)({height:window.innerHeight,width:window.innerWidth}),x=v[0],w=v[1];(0,a.useEffect)((function(){window.addEventListener("resize",(function(){w({height:window.innerHeight,width:window.innerWidth})}))}),[]),(0,a.useEffect)((function(){if(g.current){var e=g.current.clientWidth/170,t=Math.floor(e);p(t),h(e!==t?1:0)}}),[g,x]);var b=e.games.length-(o-f)>=l;return e.games?(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-12",children:(0,r.jsx)("h3",{className:t.title,children:e.title.toUpperCase()})}),(0,r.jsxs)("div",{className:e.ads?"col-12 col-lg-9":"col-12",ref:g,children:[0!==o&&(0,r.jsx)("div",{className:t.goBack+" "+t.pagerButton,onClick:function(){u(o-l)},children:(0,r.jsx)("p",{className:t.pagerCaret,children:(0,r.jsx)("span",{className:t.caretRight,children:"^"})})}),b?(0,r.jsx)("div",{className:t.goForward+" "+t.pagerButton,onClick:function(){u(o+l)},children:(0,r.jsx)("p",{className:t.pagerCaret,children:(0,r.jsx)("span",{className:t.caretLeft,children:"^"})})}):null,(0,r.jsx)("div",{className:"row "+t.gameRow,children:e.games.slice(o,o+100).map((function(n,a){return(0,r.jsx)(i.Z,{className:t.gameCard,placeId:n.placeId,creatorId:n.creatorId,creatorType:n.creatorType,creatorName:n.creatorName,iconUrl:e.icons[n.universeId],likes:n.totalUpvotes,dislikes:n.totalDownvotes,name:n.name,playerCount:n.playerCount},a)}))})]}),e.ads?(0,r.jsx)("div",{className:"col-12 col-lg-3",children:(0,r.jsx)(c.Z,{type:3})}):null]}):null}},9013:function(e,t,n){var r=n(5893),a=n(7294),o=n(1693),i=n(6911),c=(n(5304),n(2069)),s=n(2316),u=n(3633),d=n(8452),l=(0,o.QM)({label:{fontWeight:300,fontSize:"16px",marginBottom:0},labelPlaying:{fontSize:"12px",marginBottom:0,color:"#757575"},imageWrapper:{},image:{width:"100%",margin:"0 auto",display:"block"},thumbsUp:{marginBottom:0},creatorDetailsCard:{position:"absolute",background:"white",marginLeft:"-7px",boxShadow:"0 3px 4px 0 rgb(25 25 25 / 30%)"},creatorText:{color:"#c3c3c3",fontSize:"13px","&>a":{color:"#00a2ff","&:hover":{textDecoration:"underline!important"}}},floatRight:{float:"right"}});t.Z=function(e){var t=e.hideVoting,n=l(),o=(0,u.Z)(),p=(0,a.useState)(!1),m=p[0],h=p[1],g=(0,a.useState)("/img/empty.png"),v=g[0],x=g[1];(0,a.useEffect)((function(){e.iconUrl?x(e.iconUrl):x("/img/empty.png")}),[e.iconUrl]);var w=(0,a.useRef)(null),b=(0,c.IH)({placeId:e.placeId,name:e.name});return(0,r.jsx)("div",{className:e.className||"col-6 col-lg-2 ps-1 pe-1",onMouseEnter:function(){h(!0)},onMouseLeave:function(){h(!1)},children:(0,r.jsxs)("div",{className:o.card+" ",ref:w,children:[(0,r.jsx)(d.Z,{href:b,children:(0,r.jsx)("a",{children:(0,r.jsx)("div",{className:n.imageWrapper,children:(0,r.jsx)("img",{className:n.image,src:v,alt:e.name,onLoad:function(e){},onError:function(t){console.log("[info] icon load error"),v&&-1===v.indexOf("empty.png")&&(x("/img/empty.png"),setTimeout((function(){x(e.iconUrl)}),1e3),f)}})})})}),(0,r.jsxs)("div",{className:"pe-2 pb-2 pt-2 ps-2",children:[(0,r.jsx)("p",{className:n.label+" truncate",children:e.name}),(0,r.jsxs)("p",{className:n.labelPlaying+" truncate",children:[(0,i.d)(e.playerCount)," Playing"]}),!m&&!t&&(0,r.jsx)("p",{className:n.thumbsUp+" mt-2",children:(0,r.jsx)("span",{className:"icon-thumbs-up"})})||null,m&&(0,r.jsxs)("div",{className:n.creatorDetailsCard+" "+o.card,style:w?{width:w.current.clientWidth+"px"}:void 0,children:[t?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:n.thumbsUp+" ps-2 pe-2 mt-2",children:[(0,r.jsx)("span",{className:"icon-thumbs-up"}),(0,r.jsx)("span",{className:"icon-thumbs-down "+n.floatRight})]}),(0,r.jsx)("div",{className:"ps-1 pt-2 pe-1",children:(0,r.jsx)("div",{className:"divider-top"})})]}),(0,r.jsxs)("p",{className:"ps-2 pt-2 pb-0 "+n.creatorText,children:["By ",(0,r.jsx)(s.Z,{type:e.creatorType,name:e.creatorName,id:e.creatorId})]})]})]})]})})}},8660:function(e,t,n){var r=n(5893);t.Z=function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"theme-2016-enabled"}),e.children]})}},7989:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(5893),a=(n(6486),n(7294)),o=n(1693),i=n(465),c={1:{name:"Banner",width:728,height:90},2:{name:"SkyScraper",width:160,height:620},3:{name:"Box",width:300,height:270}},s=n(8452),u=(0,o.QM)({adWrapper:{},adImage:{width:"100%",height:"auto",margin:"0 auto",display:"block","@media(max-width: 800px)":{paddingTop:"10px",paddingBottom:"10px"}}}),d=function(e){var t=c[e.type],n=(0,a.useState)(null),o=n[0],d=n[1],l=(0,a.useState)(null),p=l[0],m=l[1],f=(0,a.useState)(null),h=f[0],g=f[1],v=(0,a.useState)(!1),x=v[0],w=v[1],b=u();if((0,a.useEffect)((function(){(0,i.ZP)("GET","".concat((0,i.SV)(),"/user-sponsorship/").concat(e.type)).then((function(e){var t=(new DOMParser).parseFromString(e.data,"text/html"),n=t.getElementsByTagName("img"),r=t.getElementsByTagName("a");if(n.length&&r.length){var a=n[0].getAttribute("src"),o=r[0].getAttribute("href"),i=r[0].getAttribute("title");a&&o&&i?(d(a),g(i),m(o)):console.error("[error] could not get an attribute from iframe: ",a,o,i)}else console.error("[error] could not get an element from iframe:",n,r)})).catch((function(e){console.error("[error] could not load user ad:",e)}))}),[]),!t)throw new Error("unexpected adType: ".concat(e.type));return o?(0,r.jsx)("div",{className:b.adWrapper,style:x?void 0:{height:t.height,width:"100%"},children:(0,r.jsx)(s.Z,{href:p||"#",children:(0,r.jsx)("a",{title:h,children:(0,r.jsx)("img",{onLoad:function(){w(!0)},src:o,className:b.adImage,style:{maxWidth:t.width,maxHeight:t.height}})})})}):(0,r.jsx)("div",{style:{width:"100%",height:t.height}})}},3633:function(e,t,n){var r=(0,n(1693).QM)({card:{borderRadius:0,boxShadow:"0 1px 4px 0 rgb(25 25 25 / 30%)",background:"white"}});t.Z=r},5304:function(e,t,n){n.d(t,{$K:function(){return p},Dt:function(){return h},FS:function(){return s},Ic:function(){return v},Ol:function(){return g},Yr:function(){return f},_w:function(){return d},li:function(){return m},r7:function(){return x},rV:function(){return l},yz:function(){return u}});var r=n(7568),a=n(4051),o=n.n(a),i=n(465),c=n(2300),s=function(e){return"string"!==typeof e&&(e=""),e.replace(/'/g,"").replace(/[^a-zA-Z0-9]+/g,"-").replace(/^-+|-+$/g,"").replace(/^(COM\d|LPT\d|AUX|PRT|NUL|CON|BIN)$/i,"")||"unnamed"},u=((0,c.Z)("itemPageLate2016Enabled",!1),(0,c.Z)("clientSideRenderingEnabled",!1),function(e){var t=e.assetId,n=e.name;return"/catalog/".concat(t,"/").concat(s(n))}),d=function(e){var t=e.category,n=e.subCategory,r=e.query,a=e.limit,o=e.cursor,c=e.sort,s=e.creatorType,u=e.creatorId,d="/v1/search/items?category="+t+"&limit="+a+"&sortType="+c;return o&&(d+="&cursor="+encodeURIComponent(o)),r&&(d+="&keyword="+encodeURIComponent(r)),n&&(d+="&subcategory="+encodeURIComponent(n)),s&&u&&(d+="&creatorTargetId="+u+"&creatorType="+s),(0,i.ZP)("GET",(0,i.mn)("catalog",d)).then((function(e){return e.data}))},l=(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.ZP)("GET",(0,i.mn)("api","/marketplace/productinfo?assetId="+t)).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})))}(),function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a,c,s,u,d;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",{data:{data:[]}});case 2:return e.prev=3,e.next=6,(0,i.ZP)("POST",(0,i.mn)("catalog","/v1/catalog/items/details"),{items:t.map((function(e){return{itemType:"Asset",id:e}}))});case 6:for(n=e.sent,r=!0,a=!1,c=void 0,e.prev=8,s=n.data.data[Symbol.iterator]();!(r=(u=s.next()).done);r=!0)"undefined"===typeof(d=u.value).isForSale&&(d.isForSale=0!==d.unitsAvailableForConsumption&&"number"===typeof d.price&&"undefined"===typeof d.lowestPrice);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),a=!0,c=e.t0;case 16:e.prev=16,e.prev=17,r||null==s.return||s.return();case 19:if(e.prev=19,!a){e.next=22;break}throw c;case 22:return e.finish(19);case 23:return e.finish(16);case 24:return e.abrupt("return",n);case 27:if(e.prev=27,e.t1=e.catch(3),!e.t1.response||429!==e.t1.response.status){e.next=33;break}return e.next=32,new Promise((function(e){return setTimeout(e,2500)}));case 32:return e.abrupt("continue",2);case 33:throw e.t1;case 34:e.next=2;break;case 36:case"end":return e.stop()}}),e,null,[[3,27],[8,12,16,24],[17,,19,23]])})));return function(t){return e.apply(this,arguments)}}()),p=function(e){var t=e.assetId,n=e.assetTypeId,r=e.limit;return(0,i.ZP)("GET",(0,i.mn)("catalog","/v1/recommendations/asset/"+n+"?contextAssetId="+t+"&numItems="+r)).then((function(e){return e.data}))},m=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assetId,r=t.offset,e.abrupt("return",(0,i.ZP)("GET",(0,i.SV)()+"/comments/get-json?assetId="+n+"&startIndex="+r+"&thumbnailWidth=100&thumbnailHeight=100&thumbnailFormat=PNG&cachebuster="+Math.random()).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assetId,r=t.comment,e.next=3,(0,i.ZP)("POST",(0,i.SV)()+"/comments/post",{text:r,assetId:n});case 3:if("string"!==typeof(a=e.sent).data.ErrorCode){e.next=6;break}throw new Error(a.data.ErrorCode);case 6:return e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(e){var t=e.assetId,n=e.addToProfile;return(0,i.ZP)("POST",(0,i.SV)()+"/asset/toggle-profile",{assetId:t,addToProfile:n})},g=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assetId,r=t.userId,e.next=3,(0,i.ZP)("GET",(0,i.mn)("catalog","/v1/favorites/users/"+r+"/assets/"+n+"/favorite")).then((function(e){return e.data}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assetId,r=t.userId,e.next=3,(0,i.ZP)("POST",(0,i.mn)("catalog","/v1/favorites/users/"+r+"/assets/"+n+"/favorite"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.assetId,r=t.userId,e.next=3,(0,i.ZP)("DELETE",(0,i.mn)("catalog","/v1/favorites/users/"+r+"/assets/"+n+"/favorite"));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2069:function(e,t,n){n.d(t,{CT:function(){return f},Ff:function(){return w},IH:function(){return u},MC:function(){return x},Sq:function(){return d},TD:function(){return b},Xy:function(){return p},Yv:function(){return h},ZN:function(){return m},af:function(){return l},eJ:function(){return v},nh:function(){return g}});var r=n(7568),a=n(4051),o=n.n(a),i=n(2300),c=n(465),s=n(5304),u=((0,i.Z)("2015GameDetailsPageEnabled",!1),(0,i.Z)("clientSideRenderingEnabled",!1),function(e){var t=e.placeId,n=e.name;return"/games/".concat(t,"/").concat((0,s.FS)(n))}),d=function(e){var t=e.userId,n=e.cursor;return(0,c.ZP)("GET",(0,c.mn)("games","/v2/users/".concat(t,"/games?cursor=").concat(encodeURIComponent(n||"")))).then((function(e){return e.data}))},l=function(e){var t=e.groupId,n=e.cursor;return(0,c.ZP)("GET",(0,c.mn)("games","/v2/groups/".concat(t,"/games?cursor=").concat(encodeURIComponent(n||"")))).then((function(e){return e.data}))},p=function(e){var t=e.gameSortsContext;return(0,c.ZP)("GET",(0,c.mn)("games","/v1/games/sorts?gameSortsContext=".concat(encodeURIComponent(t||"")))).then((function(e){return e.data}))},m=function(e){var t=e.sortToken,n=e.limit,r=e.genre,a=void 0===r?0:r;return(0,c.ZP)("GET",(0,c.mn)("games","/v1/games/list?sortToken=".concat(encodeURIComponent(t),"&maxRows=").concat(n,"&genre=").concat(a))).then((function(e){return e.data}))},f=function(e){var t=e.universeId;return(0,c.ZP)("GET",(0,c.mn)("games","/v2/games/".concat(t,"/media"))).then((function(e){return e.data.data}))},h=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.placeId,e.next=3,(0,c.ZP)("GET",(0,c.SV)()+"/game/get-join-script?placeId="+encodeURIComponent(n));case 3:r=e.sent,r.data.joinUrl,(a=document.createElement("a")).setAttribute("href",r.data.prefix+""+r.data.joinScriptUrl),document.body.appendChild(a),a.click(),setTimeout((function(){a.remove()}),1e3);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.placeIds;return(0,c.ZP)("GET",(0,c.mn)("games","/v1/games/multiget-place-details?placeIds=".concat(encodeURIComponent(t.join(","))))).then((function(e){return e.data}))},v=function(e){var t=e.universeIds;return(0,c.ZP)("GET",(0,c.mn)("games","/v1/games?universeIds=".concat(encodeURIComponent(t.join(","))))).then((function(e){return e.data.data}))},x=function(e){var t=e.placeId,n=e.offset;return(0,c.ZP)("GET",(0,c.SV)()+"/games/getgameinstancesjson?placeId=".concat(t,"&startIndex=").concat(n)).then((function(e){return e.data}))},w=function(e){var t=e.universeIds;return(0,c.ZP)("GET",(0,c.mn)("games","/v1/games/votes?universeIds="+encodeURIComponent(t.join(",")))).then((function(e){return e.data.data}))},b=function(e){var t=e.universeId,n=e.isUpvote;return(0,c.ZP)("PATCH",(0,c.mn)("games","/v1/games/"+t+"/user-votes"),{vote:n}).then((function(e){return e.data.data}))}}}]);