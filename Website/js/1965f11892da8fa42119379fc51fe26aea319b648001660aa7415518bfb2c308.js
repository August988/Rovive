/* js/dist/captchaV2TemplatesBundle.js */
angular.module("captchaV2Templates", []).run(["$templateCache", function($templateCache) {
$templateCache.put("captcha", "<div class=modal ng-class=$ctrl.getCaptchaClasses() ng-click=$ctrl.hideCaptcha()><div class=modal-dialog><div class=modal-content><div class=modal-body ng-click=$event.stopPropagation()><button type=button class=close ng-click=$ctrl.hideCaptcha()><span aria-hidden=true><span class=icon-close></span></span><span class=sr-only>Close</span></button><div id=\"{{ $ctrl.id }}\" class=captchav2-funcaptcha-modal-body></div></div></div></div></div>");
}]);

/* js/dist/captchaV2Bundle.js */
"use strict";(Roblox=Roblox||{}).CaptchaConstants=Roblox.CaptchaConstants||{endpoints:{sendMessage:"",addFriend:"",follow:"",signup:"",joinGroup:"",login:"",postComment:"",clothingUpload:"",favorite:"",appSignup:"",appLogin:"",resetPassword:""},serviceData:{sitekey:"",trulyInvisibleSitekey:"",successSuffix:"Captcha_Success",failSuffix:"Captcha_Failed",displayedSuffix:"Captcha_Displayed",captchaSolvedPrefix:"Captcha_User_Solved_InSeconds_",captchaSolveTimeIntervals:[{seconds:1,suffix:"Less_Than_1"},{seconds:3,suffix:"1_To_3"},{seconds:10,suffix:"4_To_10"},{seconds:20,suffix:"11_To_20"},{seconds:30,suffix:"21_To_30"},{seconds:40,suffix:"31_To_40"},{seconds:50,suffix:"41_To_50"}],captchaSolveTimeLarge:"Greater_Than_50",badgePosition:"bottomright",logConstants:{successSuffix:"_Success",failSuffix:"_Failed",maxFailSuffix:"_MaxFailed",retrySuffix:"_Retried",displayedSuffix:"_Displayed",triggeredSuffix:"_Triggered",initializedSuffix:"_Initialized",suppressedSuffix:"_Suppressed",providerErrorSuffix:"_FailedToLoad",completedTimeSequenceSuffix:"_SolveTime",solvedPrefix:"_User_Solved_InSeconds_",solveTimeIntervals:[{seconds:1,suffix:"Less_Than_1"},{seconds:3,suffix:"1_To_3"},{seconds:10,suffix:"4_To_10"},{seconds:20,suffix:"11_To_20"},{seconds:30,suffix:"21_To_30"},{seconds:40,suffix:"31_To_40"},{seconds:50,suffix:"41_To_50"}],solveTimeLarge:"Greater_Than_50",eventStreamCaptchaEventName:"captcha",eventStreamCaptchaInitiatedEventName:"captchaInitiated",eventStreamCaptchaTokenReceivedEventName:"captchaTokenReceived",captchaInitiatedChallengeTypes:{visible:"visible",hidden:"hidden",error:"error"}}},types:{signup:"signup",sendMessage:"sendMessage",addFriend:"addFriend",follow:"follow",joinGroup:"joinGroup",login:"login",postComment:"postComment",clothingUpload:"clothingUpload",favorite:"favorite",appSignup:"appSignup",appLogin:"appLogin",gameCardRedeem:"gameCardRedeem",resetPassword:"resetPassword"},ids:{defaultCaptcha:"captcha-container",signup:"signup-captcha",login:"login-captcha",friends:"friends-captcha",groups:"groups-captcha",profile:"profile-captcha",playerSearch:"player-search-captcha",appCaptcha:"app-captcha",gameCardRedeem:"game-card-redeem-captcha",resetPassword:"reset-password-captcha"},messageElementIds:{defaultError:"captcha-error"},eventElementIds:{shown:"captcha-event-shown",token:"captcha-event-token",provider:"captcha-event-provider"},hybridEvents:{shown:"CaptchaShown",success:"CaptchaSuccess"},messages:{error:"We currently cannot verify CAPTCHA, please try again later.",funCaptchaError:"We currently cannot verify FunCaptcha, please try again later."},errorCodes:{failedToLoadProviderScript:0,failedToVerify:1},localeToFunCaptchaLanguageCodeMap:{"de-de":"de","en-us":"en","es-es":"es","fr-fr":"fr","pt-br":"pt-br","ko-kr":"ko","zh-cn":"zh","zh-tw":"zh-tw","ja-jp":"ja"}};var Roblox=Roblox||{},EventTracker=window.EventTracker||null;Roblox.CaptchaLogger=function(e){var a,t=Roblox.CaptchaConstants,n=$.extend({},t.serviceData).logConstants,o=!1;function c(e){return o&&void 0!==a?e+"_"+a:e}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}this.provider=e,this.setPerAppTypeLoggingEnabled=function(e){Roblox.DeviceMeta&&Roblox.DeviceMeta().isInApp&&(o=e,a=Roblox.DeviceMeta().appType)},this.fireEvent=function(e,a){a=i(e+this.provider+a),EventTracker&&EventTracker.fireEvent(c(a))},this.startStatisticsSequence=function(e){EventTracker&&EventTracker.start(c(e))},this.endStatisticsSequenceWithSuccess=function(e){EventTracker&&EventTracker.endSuccess(c(e))},this.endStatisticsSequenceWithFailure=function(e){EventTracker&&EventTracker.endFailure(c(e))},this.logSuccess=function(e){this.fireEvent(e,n.successSuffix),this.endStatisticsSequenceWithSuccess(i(e+this.provider+n.completedTimeSequenceSuffix))},this.logFail=function(e){this.fireEvent(e,n.failSuffix)},this.logMaxFail=function(e){this.fireEvent(e,n.maxFailSuffix),this.endStatisticsSequenceWithFailure(i(e+this.provider+n.completedTimeSequenceSuffix))},this.logRetried=function(e){this.fireEvent(e,n.retrySuffix)},this.logTriggered=function(e){this.fireEvent(e,n.triggeredSuffix),this.startStatisticsSequence(i(e+this.provider+n.completedTimeSequenceSuffix))},this.logInitialized=function(e){this.fireEvent(e,n.initializedSuffix)},this.logSuppressed=function(e){this.fireEvent(e,n.suppressedSuffix)},this.logDisplayed=function(e){this.fireEvent(e,n.displayedSuffix)},this.logProviderError=function(e){this.fireEvent(e,n.providerErrorSuffix)},this.logCaptchaShownEventToEventStream=function(e){this.logCaptchaInitiatedEventToEventStream(e,n.captchaInitiatedChallengeTypes.visible)},this.logCaptchaSuppressedEventToEventStream=function(e){this.logCaptchaInitiatedEventToEventStream(e,n.captchaInitiatedChallengeTypes.hidden)},this.logCaptchaErrorEventToEventStream=function(e,a){this.logCaptchaInitiatedEventToEventStream(e,n.captchaInitiatedChallengeTypes.error,a.toString())},this.logCaptchaInitiatedEventToEventStream=function(e,a,t){if(Roblox.EventStream){var o=e,c={type:a,provider:this.provider};void 0!==t&&(c.message=t),Roblox.EventStream.SendEventWithTarget(n.eventStreamCaptchaInitiatedEventName,o,c,Roblox.EventStream.TargetTypes.WWW)}},this.logCaptchaTokenReceivedEventToEventStream=function(e,a){if(Roblox.EventStream){var t=e;Roblox.EventStream.SendEventWithTarget(n.eventStreamCaptchaTokenReceivedEventName,t,{provider:this.provider,session:a},Roblox.EventStream.TargetTypes.WWW)}},this.logCaptchaEventToEventStream=function(e,a,t,o){if(Roblox.EventStream){a=a||0;var c=t?"true":"false",i=e;Roblox.EventStream.SendEventWithTarget(n.eventStreamCaptchaEventName,i,{solveDuration:a,success:c,provider:this.provider,session:o||""},Roblox.EventStream.TargetTypes.WWW)}}},(Roblox=Roblox||{}).FunCaptcha=function(){var e,a=[],t=($.extend({},Roblox.CaptchaConstants.messages),"#FunCaptcha-Token"),n="#fc-iframe-wrap",o=500,c=!1,i=0,r=500,s=1500,p=new Roblox.CaptchaLogger("FunCaptcha"),l={},d={},u={cType:null,tokenValidationRetries:0,extraValidationParams:{},returnTokenInSuccessCb:!1,solvedCb:$.noop,loadedCb:$.noop,supressCb:$.noop,shownCb:$.noop,successCb:$.noop,errorCb:$.noop,fcInstance:null};function h(e){for(var t=0;t<a.length;t++)if(a[t].Type===e)return a[t];return null}function f(e){d[e]&&d[e].fcInstance.refresh_session()}function v(a,l){if(c=!1,p.logTriggered(l.cType),d[a]&&d[a].fcInstance)return f(a),a;var g=function(e,a){var t=$.extend({},u,a);return d[e]=t,t}(a,l);e=C(),p.logInitialized(g.cType);try{g.fcInstance=new FunCaptcha({public_key:h(g.cType).PublicKey,target_html:a,language:function(){if(Roblox&&Roblox.Intl){var e=new Roblox.Intl;if(Roblox.CaptchaConstants.localeToFunCaptchaLanguageCodeMap.hasOwnProperty(e.locale))return Roblox.CaptchaConstants.localeToFunCaptchaLanguageCodeMap[e.locale]}return}(),callback:function(){var n=null;e&&(n=C()-e,e=null);var o=$(t).val();p.logCaptchaTokenReceivedEventToEventStream(g.cType,o),!0===g.returnTokenInSuccessCb?(p.logSuccess(g.cType),p.logCaptchaEventToEventStream(g.cType,n,!0,o),g.successCb(o)):(!function(e,a,t,n){var o={fcToken:t};o=$.extend({},o,e.extraValidationParams),$.ajax({method:"POST",data:o,url:h(e.cType).ApiUrl,success:function(){p.logSuccess(e.cType),p.logCaptchaEventToEventStream(e.cType,n,!0,t),e.successCb()},error:function(){p.logFail(e.cType),e.tokenValidationRetries<i?c||(c=!0,setTimeout(function(){!function(e,a){c&&(e.tokenValidationRetries+=1,p.logRetried(e.cType),v(a,e))}(e,a)},r+Math.floor(Math.random()*(s-r)))):(p.logMaxFail(e.cType),p.logCaptchaEventToEventStream(e.cType,n,!1,t),e.errorCb&&e.errorCb(Roblox.CaptchaConstants.errorCodes.failedToVerify,null))}})}(g,a,o,n),g.solvedCb())},loaded_callback:function(){g.cType,setTimeout(function(){$(n).focus()},o),g.loadedCb()},onsuppress:function(){var e;e=g.cType,p.logSuppressed(e),p.logCaptchaSuppressedEventToEventStream(e),g.suppressCb()},onshown:function(){var e;e=g.cType,p.logDisplayed(e),p.logCaptchaShownEventToEventStream(e),g.shownCb()}})}catch(e){p.logProviderError(g.cType),p.logCaptchaErrorEventToEventStream(g.cType,e),g.errorCb&&g.errorCb(Roblox.CaptchaConstants.errorCodes.failedToLoadProviderScript,e)}return a}function g(){var e=$("#game-card-redeem-captcha").addClass("hidden").detach();$("#redeem-card-wrapper").append(e),Roblox.Dialog.close()}function C(){return(new Date).valueOf()}return{types:$.extend({},Roblox.CaptchaConstants.types),setMaxRetriesOnTokenValidationFailure:function(e){i=e},setRetryIntervalRange:function(e,a){r=e,s=a},reset:f,render:v,addCaptchaTypes:function(e,t){e&&e.forEach(function(e){var n,o={Type:t?(n=e.Type,n.charAt(0).toLowerCase()+n.slice(1)):e.Type,ApiUrl:e.ApiUrl,PublicKey:e.PublicKey},c=JSON.stringify(o);l.hasOwnProperty(c)||(l[c]=o,a.push(o))})},setPerAppTypeLoggingEnabled:function(e){p.setPerAppTypeLoggingEnabled(e)},showFunCaptchaInModal:function(){Roblox.Dialog.open({bodyContent:'<div id="funcaptcha-modal-body" class="funcaptcha-modal-body"></div>',allowHtmlContentInBody:!0,showAccept:!1,showDecline:!1,xToCancel:!0,onCloseCallback:g});var e=$("#game-card-redeem-captcha").removeClass("hidden").detach();$("#funcaptcha-modal-body").append(e)},dismissFunCaptchaModal:g,captchaInstances:d,loggerInstance:p}}();var captchaV2=captchaV2||angular.module("captchaV2",["captchaV2Templates"]);captchaV2.constant("captchaV2Constants",{urls:{getMetadata:Roblox.EnvironmentUrls.captchaApi+"/v1/captcha/metadata",funCaptchaRedeem:{WebSignup:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/signup/web",AppSignup:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/signup/app",WebLogin:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/login/web",AppLogin:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/login/app",WebResetPassword:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/resetpassword/web",UserAction:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/user",WebGamecardRedemption:Roblox.EnvironmentUrls.captchaApi+"/v1/funcaptcha/gamecardredemption/web"}},captchaActionTypes:{login:"login",appLogin:"appLogin",signup:"signup",appSignup:"appSignup",groupJoin:"groupJoin",groupWallPost:"groupWallPost",resetPassword:"resetPassword",toyCodeRedeem:"toyCodeRedeem"},funCaptchaCaptchaTypes:{login:"Login",appLogin:"AppLogin",signup:"Signup",appSignup:"AppSignup",groupJoin:"JoinGroup",groupWallPost:"GroupWallPost",resetPassword:"ResetPassword",toyCodeRedeem:"ToyCodeRedeem"},funCaptchaPublicKeyMap:{Login:"WebLogin",AppLogin:"AppLogin",Signup:"WebSignup",AppSignup:"AppSignup",JoinGroup:"UserAction",GroupWallPost:"UserAction",ResetPassword:"WebResetPassword",ToyCodeRedeem:"WebGamecardRedemption"},funCaptchaEvents:{resolve:"resolve",reject:"reject",shown:"shown"},captchaProviders:{arkoseLabs:"PROVIDER_ARKOSE_LABS"},errorCodes:{internal:{unknown:0,missingPrivateKey:1,missingActionType:2,failedToLoadProviderScript:3,failedToVerify:4}}}),captchaV2.factory("captchaV2Service",["$q","httpService","captchaV2Constants",function(e,a,t){var n=null;return{getMetadata:function(){return e(function(e,o){if(n)e(n);else{var c={url:t.urls.getMetadata};a.httpGet(c).then(function(a){n=a,e(a)},o)}})},getCaptchaId:function(){return(Roblox=Roblox||{}).CaptchaV2ServiceCaptchaIdBase=Roblox.CaptchaV2ServiceCaptchaIdBase||0,"captchaV2-"+ ++Roblox.CaptchaV2ServiceCaptchaIdBase}}}]),captchaV2.factory("funCaptchaService",["$q","$log","$window","captchaV2Constants","captchaV2Service",function(e,a,t,n,o){var c={},i=function(e,a,t){c.hasOwnProperty(e)&&c[e].forEach(function(e){e.name===a&&e.handle(t)})},r=function(e,a,t){t&&(c[e]=c[e]||[],c[e].push({name:a,handle:t}))},s=function(e){c[e]=[]};return o.getMetadata().then(function(e){var o={},c=[];for(var i in e.funCaptchaPublicKeys.forEach(function(e){o[e.type]=e.value}),n.funCaptchaPublicKeyMap){if(!n.funCaptchaPublicKeyMap.hasOwnProperty(i))return;var r=n.funCaptchaPublicKeyMap[i];if(r&&o.hasOwnProperty(r)){var s=n.urls.funCaptchaRedeem[r];s&&c.push({Type:i,ApiUrl:s,PublicKey:o[r]})}else a.warn("Missing public key for: "+i+"\n\tpublicKeyType: "+r)}a.debug("Add captcha types:",c),t.Roblox.FunCaptcha.addCaptchaTypes(c,!1)},function(){a.debug("Failed to load captcha metadata for funCaptchaService. FunCaptcha will not work properly.")}),{render:function(o,c,p,l,d){return e(function(e,u){var h,f=n.funCaptchaCaptchaTypes[c],v="\n\telementId: "+o+"\n\tcaptchaActionType: "+c+"\n\tfunCaptchaType: "+f;if(a.debug("Render captcha"+v),!f)return a.warn("Missing funCaptchaType for "+c),void u(n.errorCodes.internal.missingActionType);r(f,n.funCaptchaEvents.resolve,e),r(f,n.funCaptchaEvents.reject,u),r(f,n.funCaptchaEvents.shown,p),h=l?function(e){v+="\ntoken: "+e,a.debug("Passed captcha"+v),i(f,n.funCaptchaEvents.resolve,e),s(f)}:function(){a.debug("Passed captcha"+v),i(f,n.funCaptchaEvents.resolve),s(f)},t.Roblox.FunCaptcha.render(o,{cType:f,returnTokenInSuccessCb:l,successCb:h,shownCb:function(){a.debug("Captcha shown"+v),i(f,n.funCaptchaEvents.shown)},errorCb:function(e,o){o?a.error("Failed captcha ("+e+":) "+o+v):a.debug("Failed captcha ("+e+")"+v);var c=function(e){switch(e){case t.Roblox.CaptchaConstants.errorCodes.failedToLoadProviderScript:return n.errorCodes.internal.failedToLoadProviderScript;case t.Roblox.CaptchaConstants.errorCodes.failedToVerify:return n.errorCodes.internal.failedToVerify;default:return n.errorCodes.internal.unknown}}(e);i(f,n.funCaptchaEvents.reject,c),s(f)},extraValidationParams:d||{}})})}}}]),captchaV2.controller("captchaV2Controller",["captchaV2Service","captchaV2Constants","funCaptchaService","$scope",function(e,a,t,n){var o=this,c=!1,i=!1;o.captchaEnded=function(){o.activated=!1,o.shown=!1,c=!1},o.captchaShown=function(){o.shown=!0,n.$apply()},o.hideCaptcha=function(){o.activated=!1},o.getCaptchaClasses=function(){return{"captcha-activated":o.shown&&o.activated}};o.$onInit=function(){if(o.id||(o.id=e.getCaptchaId()),o.activated&&!c){c=!0;var n,i=!0===o.returnTokenInSuccessCb;n=i?function(e){if(o.activated){var t={captchaToken:e,captchaProvider:a.captchaProviders.arkoseLabs};o.captchaPassed()(t)}o.captchaEnded()}:function(){o.activated&&o.captchaPassed()(),o.captchaEnded()},t.render(o.id,o.captchaActionType,o.captchaShown,i,o.extraValidationParams).then(n,function(e){o.activated&&o.captchaFailed()(e),o.captchaEnded()})}},o.$doCheck=function(){i!==o.activated&&(i=o.activated,o.$onInit())}.bind(o)}]),captchaV2.component("captcha",{templateUrl:"captcha",bindings:{activated:"=",captchaActionType:"<",extraValidationParams:"<",returnTokenInSuccessCb:"<",captchaPassed:"&",captchaFailed:"&"},controller:"captchaV2Controller"});

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("Captcha");